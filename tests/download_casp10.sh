#!/bin/basho

set -eu

PREDICTION_URL="http://www.predictioncenter.org/download_area/CASP10/predictions/"
TARGET_ARCHIVE="http://www.predictioncenter.org/download_area/CASP10/targets/casp10.targets_unsplitted.noT0695T0739.tgz"

TARGETS=(T0644 T0645 T0648 T0649 T0650 T0651 T0652 T0653 T0654 T0655 T0657 T0658 T0659 T0661 T0662 T0663 T0664 T0665 T0666 T0667 T0668 T0669 T0671 T0672 T0673 T0674 T0675 T0676 T0677 T0678 T0679 T0680 T0681 T0682 T0683 T0684 T0685 T0686 T0687 T0688 T0689 T0690 T0691 T0692 T0693 T0694 T0696 T0697 T0698 T0699 T0700 T0701 T0702 T0703 T0704 T0705 T0706 T0707 T0708 T0709 T0710 T0711 T0712 T0713 T0714 T0715 T0716 T0717 T0719 T0720 T0721 T0722 T0723 T0724 T0726 T0727 T0729 T0731 T0732 T0733 T0734 T0735 T0736 T0737 T0738 T0740 T0741 T0742 T0743 T0744 T0745 T0746 T0747 T0749 T0750 T0751 T0752 T0753 T0754 T0755 T0756 T0757 T0758 TR644 TR655 TR661 TR662 TR663 TR671 TR674 TR679 TR681 TR688 TR689 TR696 TR698 TR699 TR704 TR705 TR708 TR710 TR712 TR720 TR722 TR723 TR724 TR738 TR747 TR750 TR752 TR754 Tc649 Tc653 Tc658 Tc666 Tc673 Tc676 Tc678 Tc680 Tc684 Tc691 Tc705 Tc717 Tc719 Tc734 Tc735)

mkdir CASP10
cd CASP10

aria2c $TARGET_ARCHIVE
tar xf $(basename $TARGET_ARCHIVE)
rm -rf $(basename $TARGET_ARCHIVE)

for TARGET in ${TARGETS[@]}; do
    echo http://www.predictioncenter.org/download_area/CASP10/predictions/${TARGET}.tar.gz >> url_file
done

aria2c -i url_file -x 5

for TARGET in ${TARGETS[@]}; do
    tar xf ${TARGET}.tar.gz
    rm -rf ${TARGET}.tar.gz
    mv ${TARGET}.pdb $TARGET
done
